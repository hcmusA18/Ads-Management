<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title><%- title %></title>
    <%- include("../partials/head.ejs"); %>
  </head>

  <body>
    <header></header>
    <main class="container-fluid d-flex bg-light">
      <div class="row"><%- include("../partials/sidebar.ejs", {toolbars: toolbars}); %></div>
      <div class="container-fluid vw-100 pt-1">
        <div class="container border border-dark rounded py-4 px-5 my-5 mx-auto shadow position-relative">
          <!-- Profile -->
          <%- include("../partials/profile_card.ejs"); %>
          <!-- Title -->
          <div class="d-block">
            <h1 class="fw-bolder">DANH SÁCH CÁC QUẬN</h1>
          </div>
          <!-- Select -->
          <div class="container-fluid mt-3 ps-0">
            <div class="d-flex flex-row align-items-center gap-2 position: relative">
              <div class="d-flex flex-row align-items-center gap-2 position-relative">
                <%- include("../partials/info_card.ejs", {title: 'Tổng số quận', value: districts.length, color: '#00b285' }); %>
                <%- include("../partials/info_card.ejs", {title: 'Tổng số phường', value: wardsCnt, color: '#e84747' }); %>
                <%- include("../partials/info_card.ejs", {title: 'Tổng số điểm quảng cáo', value: spotCnt, color: '#d59633' }); %>
                <%- include("../partials/info_card.ejs", {title: 'Tổng số bảng quảng cáo', value: boardCnt, color: '#ae57ff' }); %>
              </div>
            </div>
          </div>
          <!-- Content -->
          <div class="container-listbar d-flex flex-row" style="gap: 1rem">
            <!-- Left Bar -->
            <div class="d-inline-block list-bar">
              <div class="title py-2">QUẬN / HUYỆN</div>
              <!-- Search Bar -->
              <div class="searchBar">
                <div class="search">
                  <input
                    type="text"
                    name="searchInfo"
                    class="searchFill"
                    placeholder="Search a District"
                    style="background: transparent" />
                  <i class="fa-solid fa-magnifying-glass"></i>
                </div>
              </div>
              <!-- List District -->
              <div class="list-district scroll">
                <% districts.forEach(element => { %>
                <a href="/so/locations-detail?quan=<%= element.districtID %>" style="text-decoration: none">
                  <div class="district-box d-flex">
                    <span style="margin: 0 auto; background-color: rgba(255, 255, 255, 0)"
                      ><%= element.districtName %></span
                    >
                    <i class="fa-solid fa-chevron-right fa-2xs"></i>
                  </div>
                </a>
                <% }); 
                        %>
                <!-- Raw Data -> will be changed when apply DB -->
              </div>
              <a href="/so/locations" style="font-size: 14px">Xem chi tiết danh sách QUẬN</a>
            </div>
            <!-- Table -->
            <div class="container-fluid d-inline-block ps-0" style="width: 80%; padding: 0; margin: 0">
              <table
                data-toggle="table"
                data-search="true"
                data-pagination="true"
                data-page-list="[10, 25, 50, 100, all]"
                data-locale="vi-VN"
                data-buttons-class="primary"
                data-buttons="buttons"
                data-show-button-text="true"
                data-icon-prefix="bi"
                class="table table-bordered table-hover table-striped table-responsive-md rounded"
                smart-display>
                <thead>
                  <tr class="row m-0">
                    <th class="col" data-sortable="true" data-align="center" data-field="id">Mã Quận</th>
                    <th class="col" data-sortable="true" data-align="center" data-field="name">Tên Quận</th>
                    <th class="col" data-sortable="true" data-align="center" data-field="num1">Số Phường</th>
                    <th class="col" data-sortable="true" data-align="center" data-field="num2">Số điểm đặt</th>
                    <th class="col" data-sortable="true" data-align="center" data-field="num3">Số bảng quảng cáo</th>
                  </tr>
                </thead>
                <tbody>
                  <% districts.forEach(district => { %>
                  <tr class="editRow row m-0">
                    <td>
                      <a
                        data-bs-toggle="modal"
                        data-bs-target="#editModal-qlquan"
                        style="background-color: #00000000; display: block">
                        <%= district.districtID%>
                      </a>
                    </td>
                    <td>
                      <a
                        data-bs-toggle="modal"
                        data-bs-target="#editModal-qlquan"
                        style="background-color: #00000000; display: block">
                        <%=district.districtName%>
                      </a>
                    </td>
                    <td>
                      <a
                        data-bs-toggle="modal"
                        data-bs-target="#editModal-qlquan"
                        style="background-color: #00000000; display: block">
                        <%= details[district.districtID].wardsCnt %>
                      </a>
                    </td>
                    <td>
                      <a
                        data-bs-toggle="modal"
                        data-bs-target="#editModal-qlquan"
                        style="background-color: #00000000; display: block">
                        <%= details[district.districtID].spotCnt %>
                        
                      </a>
                    </td>
                    <td>
                      <a
                        data-bs-toggle="modal"
                        data-bs-target="#editModal-qlquan"
                        style="background-color: #00000000; display: block">
                        <%= details[district.districtID].boardCnt %>
                      </a>
                    </td>
                  </tr>
                  <% }) %>
                </tbody>
              </table>
            </div>
          </div>
          <!-- Modal -->
          <%- include('../partials/modal.ejs', {modal_id: 'editModal-qlquan', title: 'CHỈNH SỬA QUẬN', components: [
            {id: 'maquan', label: 'Mã Quận', type: 'text', required: true, disabled: true, value: 'Q001'},
            {id: 'tenquan', label: 'Tên Quận', type: 'text', required: true},
            ], buttons: [
            {label: 'Hủy', color: '#e84747', dismiss: true},
            {label: 'Xác nhận', color: '#3c77ff', dismiss: false},
            ]}); %>
          <%- include('../partials/modal.ejs', {modal_id: 'addModal-qlquan', title: 'THÊM QUẬN MỚI', components: [
            {id: 'tenquan', label: 'Tên Quận', type: 'text', required: true},
            ], buttons: [
            {label: 'Thêm', color: '#3c77ff', dismiss: true},
            ]}); %>
        </div>
      </div>
    </main>
  </body>
</html>
