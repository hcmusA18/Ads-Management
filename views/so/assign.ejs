<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title><%- title %></title>
    <%- include('../partials/head.ejs') %>
</head>

<body>
<header></header>
<main class="container-fluid d-flex bg-light">
    <div class="row"><%- include('../partials/sidebar.ejs', { toolbars: toolbars }) %></div>
    <div class="container-fluid vw-100 pt-1">
        <div class="container border border-dark rounded py-4 px-5 my-5 mx-auto shadow position-relative">
            <!-- Profile -->
            <%- include("../partials/profile_card.ejs", {user: {name: 'Admin' , level: 'Sở VH-TT' }}); %>

            <!-- Title -->
            <div class="d-block">
                <h1 class="fw-bolder">PHÂN CÔNG TÀI KHOẢN</h1>
            </div>
            <!-- Select -->
            <div class="container-fluid mt-3 ps-0">
                <div class="d-flex flex-row align-items-center gap-2 position-relative">
                    <div class="d-flex flex-row align-items-center gap-2 position-relative">
                        <%- include("../partials/info_card.ejs", {title: 'Số lượng tài khoản' , value: '25' , color: '#00b285' }); %>
                        <%- include("../partials/info_card.ejs", {title: 'Đã phân công' , value: '20' , color: '#d59633' }); %>
                    </div>
                </div>
            </div>
            <!-- Table -->
            <table data-toggle="table" data-search="true" data-pagination="true" data-page-list="[10, 25, 50, 100, all]"
                   data-locale="vi-VN" data-buttons-class="primary" data-buttons="buttons" data-show-button-text="true"
                   data-icon-prefix="bi"
                   class="table table-bordered table-hover table-striped table-responsive-md rounded" smart-display>
                <thead>
                <tr class="row m-0">
                    <th class="col-1" data-sortable="true" data-align="center" data-field="no">No</th>
                    <th class="col-2" data-sortable="true" data-align="center" data-field="name">Tên đăng nhập</th>
                    <th class="col-3" data-sortable="true" data-align="center" data-field="level">Cấp bậc</th>
                    <th class="col-2" data-sortable="true" data-align="center" data-field="dist">Quận</th>
                    <th class="col-2" data-sortable="true" data-align="center" data-field="ward">Phường</th>
                    <th class="col-2" data-field="action" data-align="center">Hành động</th>
                </tr>
                </thead>
                <% accounts = [
                    {
                        'username': 'giathinnnn',
                        'role': '',
                        'district': '',
                        'ward': '',
                        'isAssigned': 0
                    },
                    {
                        'username': 'cokaaa',
                        'role': '',
                        'district': '',
                        'ward': '',
                        'isAssigned': 0
                    },
                    {
                        'username': 'ltquannnn',
                        'role': '',
                        'district': '',
                        'ward': '',
                        'isAssigned': 0
                    },
                    {
                        'username': 'tohaaaa',
                        'role': '',
                        'district': '',
                        'ward': '',
                        'isAssigned': 0
                    },
                    {
                        'username': 'obitooo',
                        'role': 'Cán bộ Quận',
                        'district': '2',
                        'ward': '',
                        'isAssigned': 1
                    },
                    {
                        'username': 'ronboogz',
                        'role': 'Cán bộ Quận',
                        'district': '6',
                        'ward': '',
                        'isAssigned': 1
                    },
                    {
                        'username': 'weanleee',
                        'role': 'Cán bộ Quận',
                        'district': '7',
                        'ward': '',
                        'isAssigned': 1
                    },
                    {
                        'username': 'puhioooo',
                        'role': 'Cán bộ Phường',
                        'district': 'Bình Tân',
                        'ward': 'An Lạc',
                        'isAssigned': 1
                    },
                    {
                        'username': 'righttttt',
                        'role': 'Cán bộ Phường',
                        'district': '6',
                        'ward': '5',
                        'isAssigned': 1
                    },
                    {
                        'username': 'naomiiii',
                        'role': 'Cán bộ Phường',
                        'district': 'Tân Phú',
                        'ward': 'Tân Quý',
                        'isAssigned': 1
                    },
                    {
                        'username': 'conannnn',
                        'role': 'Cán bộ Phường',
                        'district': 'Bình Thạnh',
                        'ward': '25',
                        'isAssigned': 1
                    },
                    {
                        'username': 'miraaaa',
                        'role': 'Cán bộ Phường',
                        'district': 'Tân Bình',
                        'ward': '15',
                        'isAssigned': 1
                    },
                    {
                        'username': 'sherlock',
                        'role': 'Cán bộ Phường',
                        'district': '6',
                        'ward': '6',
                        'isAssigned': 1
                    }
                ] %>
                <tbody>
                <% accounts.forEach(function(account, index) { %>
                    <tr class="row m-0">
                        <td class="col-1" data-align="center"><%= index + 1 %></td>
                        <td class="col-2" data-align="center"><%= account.username %></td>
                        <td class="col-3" data-align="center"><%= account.role %></td>
                        <td class="col-2"><%= account.district !== '' ? 'Quận ' + account.district : '' %></td>
                        <td class="col-2"><%= account.ward !== '' ? 'Phường ' + account.ward : '' %></td>
                        <td class="col-2" data-align="center">
                            <div class="d-flex flex-row align-items-center justify-content-center action-icons bg-transparent">
                                <% if (!account.isAssigned) { %>
                                    <button type="button" class="btn btn-success border-0 text-wrap text-center"
                                            data-bs-toggle="modal"
                                            data-bs-target="#modal<%= index %>"
                                            style="width: 70%; background-color: #60c98b;">Phân công
                                    </button>
                                <% } else { %>
                                    <a href="" data-bs-toggle="modal" data-bs-target="#modal<%= index %>"
                                       class="mx-3 bg-transparent">
                                        <img src="/images/edit.svg" alt="edit-icon">
                                    </a>
                                    <a href="#" class="mx-3 bg-transparent">
                                        <img src="/images/remove.svg" alt="remove-icon">
                                    </a>
                                <% } %>
                            </div>
                        </td>
                    </tr>
                    <!-- Modal edit -->
                    <div class="modal fade" id="modal<%= index %>" tabindex="-1" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered">
                            <div class="modal-content">
                                <div class="modal-header pb-3 border-0">
                                    <button type="button" class="btn-close" data-bs-dismiss="modal"
                                            aria-label="Close"></button>
                                </div>
                                <div class="modal-body pt-1 pb-2 border-0">
                                    <h5 class="modal-title pb-2 text-center fw-bold fs-4">
                                        CẤP QUYỀN CHO <span style="color: #355ded;"><%= account.username %></span>
                                    </h5>
                                    <form>
                                        <div class="d-flex justify-content-between">
                                            <div class="mb-3 d-flex justify-content-between flex-fill">
                                                <label for="maloai-lhqc" class="col-form-label mb-1">Quận:</label>
                                                <div class="dropdown justify-content-end px-1 flex-fill"
                                                     style="height: 2.2rem;">
                                                    <select class="form-select" aria-label="Default select example"
                                                            style="width: 95%;"
                                                            onfocus='this.size=5;' onblur='this.size=1;'
                                                            onchange='this.size=1; this.blur();'>
                                                        <option selected><%= account.district ? 'Quận ' + account.district : 'Chọn quận' %> </option>
                                                        <% for (let i = 1; i <= 12; i++) { %>
                                                            <option value="<%= i %>">Quận <%= i %></option>
                                                        <% } %>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="mb-3 d-flex justify-content-between flex-fill">
                                                <label for="loai-lhqc" class="col-form-label mb-1">Phường:</label>
                                                <div class="dropdown justify-content-end px-1 flex-fill"
                                                     style="height: 2.2rem;">
                                                    <select class="form-select" aria-label="Default select example"
                                                            style="width: 95%;"
                                                            onfocus='this.size=5;' onblur='this.size=1;'
                                                            onchange='this.size=1; this.blur();'
                                                            <% account.role === 'Cán bộ Quận' ? 'disabled' : '' %>
                                                    >
                                                        <option selected><%= account.ward ? 'Phường ' + account.ward : 'Chọn phường' %></option>
                                                        <% for (let i = 1; i <= 12; i++) { %>
                                                            <option value="<%= i %>">Phường <%= i %></option>
                                                        <% } %>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                    </form>
                                </div>

                                <div class="modal-footer pt-1 d-flex justify-content-around border-0"
                                     style="background-color: #f7fafc">
                                    <button type="button" class="btn" data-bs-dismiss="modal"
                                            style="min-width: 6.5rem; background-color: #e84747; color: #f7fafc">
                                        Hủy
                                    </button>
                                    <button type="button" class="btn"
                                            style="min-width: 6.5rem; background-color: #3c77ff; color: #f7fafc">
                                        Xác nhận
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                <% }); %>
                </tbody>
            </table>

            <!-- Modal add -->
            <%- include('../partials/modal.ejs',
            {modal_id: 'addModal-pc',
            sub_title: 'Hãy điền tên tài khoản (Mật khẩu sẽ được tạo ngẫu nhiên)',
            title: 'Tạo tài khoản',
            components: [
            {label: 'Tên tài khoản', type: 'text', id: 'input1', required: true}],
            buttons: [
            {label: 'Hủy', color: '#e84747', dismiss: true},
            {label: 'Thêm', color: '#3c77ff', dismiss: false}]
            }) %>

            <!-- Modal edit -->

            <div class="modal fade" id="assigntModal1" tabindex="-1" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">
                        <div class="modal-header pb-3" style="border: none">
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body pt-1 pb-2" style="border: none">
                            <h5 class="modal-title pb-2" style="font-size: 22px; font-weight: 700; text-align: center">
                                CẤP QUYỀN CHO gt
                            </h5>
                            <form>
                                <div class="d-flex" style="justify-content: space-between;">
                                    <div class="mb-3 d-flex" style="justify-content: space-between;">
                                        <label for="maloai-pc" class="col-form-label mb-1">Quận:</label>
                                        <div class="dropdown"
                                             style="padding: 7px 0; height: 36.6px; width: 170px; justify-content: flex-end;">
                                            <select class="form-select" aria-label="Default select example"
                                                    style="width: 95%;" onfocus='this.size=5;' onblur='this.size=1;'
                                                    onchange='this.size=1; this.blur();'>
                                                <option selected>Open this select menu</option>
                                                <option value="1">One</option>
                                                <option value="2">Two</option>
                                                <option value="3">Three</option>
                                                <option value="1">One</option>
                                                <option value="2">Two</option>
                                                <option value="3">Three</option>
                                                <option value="1">One</option>
                                                <option value="2">Two</option>
                                                <option value="3">Three</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="mb-3 d-flex" style="justify-content: space-between;">
                                        <label for="loai-pc" class="col-form-label mb-1">Phường:</label>
                                        <div class="dropdown"
                                             style="padding: 7px 0; height: 36.6px; width: 150px; justify-content: flex-end;">
                                            <select class="form-select" aria-label="Default select example"
                                                    style="width: 95%;" onfocus='this.size=5;' onblur='this.size=1;'
                                                    onchange='this.size=1; this.blur();'>
                                                <option selected>Open this select menu</option>
                                                <option value="1">One</option>
                                                <option value="2">Two</option>
                                                <option value="3">Three</option>
                                                <option value="1">One</option>
                                                <option value="2">Two</option>
                                                <option value="3">Three</option>
                                                <option value="1">One</option>
                                                <option value="2">Two</option>
                                                <option value="3">Three</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                        <div class="modal-footer pt-1 d-flex justify-content-around"
                             style="border: none; background-color: #f7fafc">
                            <button type="button" class="btn" data-bs-dismiss="modal"
                                    style="min-width: 6.5rem; background-color: #e84747; color: #f7fafc">
                                Hủy
                            </button>
                            <button type="button" class="btn"
                                    style="min-width: 6.5rem; background-color: #3c77ff; color: #f7fafc">
                                Xác nhận
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>


</body>

</html>
